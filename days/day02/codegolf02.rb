#D=$<.map &:bytes;def f =p D.sum{(4*_3-1+6*_1)%9+1};f;D.map!{[_1,0,(_1+_3-1)%3+88]};f
#p$<.sum{x,_,y=_1.bytes;(4*y-1+6*x)%9+1}
p$<.map(&:bytes).sum{(4*_3-3*_1-1)%9+1}

__END__
d=*$<;p d.sum{a=_1[2]<=>?Y;a+2+(a-_1.ord+67)%3*3},d.sum{a=_1[2]<=>?Y;a*3+4+(a+_1.ord-65)%3}

d=*$<;p d.sum{a=_1[2]<=>?Y;a+2+(a-=(_1[0]<=>?B)-1)%3*3},d.sum{a=_1[2]<=>?Y;a*3+4+(a+=(_1[0]<=>?B)+1)%3}

d=$<.map &:split;p d.sum{a=_2<=>?Y;a+2+(a-=(_1<=>?B)-1)%3*3},d.sum{a=_2<=>?Y;a*3+4+(a+=(_1<=>?B)+1)%3}







d=$<.map(&:split).map{_1.map &:ord}
f=->d{p d.sum{(4*(_2-87)+6*(_1-65)-1)%9+1}}
f[d]
f[d.map!{[_1,(_1+_2-1)%3+88]}]




d=$<.map &:bytes
def f =p d.sum{(4*(_3-87)+6*(_1-65)-1)%9+1}
f
d.map!{[_1,(_1+_3-1)%3+88]}
f